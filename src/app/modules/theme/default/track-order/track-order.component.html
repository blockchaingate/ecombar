<div class="container">
    <div class="py-3">
        <form class="js-focus-state" (ngSubmit)="onSearch()">
            <div class="input-group">
                    <input type="text" name="searchText" [(ngModel)]="orderId" class="form-control border py-2 pl-5 font-size-15 border-right-0 height-42 border-width-0 rounded-left-pill border-primary" name="email" id="searchproduct-item" placeholder="{{'Order ID'|translate}}" aria-label="Search for Products"
                    aria-describedby="searchProduct1" required>
                <div class="input-group-append">
    
                    <button class="btn btn-dark height-42 py-2 px-3 rounded-right-pill" type="submit" id="searchProduct1" routerLinkActive="router-link-active">
                        <span class="ec ec-search font-size-20"></span>
                    </button>
                </div>
            </div>
        </form>
    </div>

</div>

<div class="container" *ngIf="order">
    <div class="pb-2">
        {{'ObjectId' | translate}}: 
        <a target="_blank" href="/iddock/detail/things/{{order.objectId}}">
            {{order.objectId}}
        </a>
    </div>
    <div class="row">
        <div class="col col-8 px-2">
            <div class="card w-100">
                <div class="p-3">
                    <div class="py-3">
                        <div class="py-2 text-muted d-flex align-items-center justify-content-between">
                            <div>
                                {{'Shipping information' | translate}}
                            </div>
                            
                            <button class="btn" (click)="change()">{{'Change' | translate}}</button>
                        </div>
                        <div>
                            <div class="font-weight-bold">
                                {{order.name}} {{order.buyerPhone}}
                            </div>
                            <div>
                                {{order.streetNumber}} {{order.streetName}} {{order.city}} {{order.province}}, {{order.zip}} {{order.country}}
                            </div>                       
                        </div>
                    </div>


                    <div class="py-3 ">
                        <div class="py-2 text-muted">
                            {{'Shipping services' | translate}}
                        </div>
                        <div class="row Shipping-method">
                            <div class="col col-4 border-top border-bottom  p-3 col-md-offset-1" [ngClass]="selectedShippingService=='express' ? 'selected' : ''" (click)="selectShippingService('express')">


                                <div class="d-flex align-items-start">
                                    <img src="/assets/svg/delivery2.svg">
                                    <div class="px-3">
                                        <div class="font-weight-bold">
                                            {{'Express delivery' | translate}}
                                        </div>
                                        <div class="text-muted">
                                            {{'We ship in 1-2 days' | translate}}
                                        </div>
                                        <div>
                                            10{{currency}}
                                        </div>
                                    </div>
                                </div>
    
                            </div>
    
                            <div class="col col-4 border p-3"  [ngClass]="selectedShippingService=='standard' ? 'selected' : ''" (click)="selectShippingService('standard')">
    
                                <div class="d-flex align-items-start">
                                    <img src="/assets/svg/delivery.svg">
                                    <div class="px-3">
                                        <div class="font-weight-bold">
                                            {{'Standard delivery' | translate}}
                                        </div>
                                        <div class="text-muted">
                                            {{'We ship in 3-7 day' | translate}}
                                        </div>
                                        <div>
                                            {{'Free' | translate}}
                                        </div>
                                    </div>
                                </div>
                            </div> 
                            
                            <div class="col col-4 border-top border-bottom p-3" [ngClass]="selectedShippingService=='pickup' ? 'selected' : ''" (click)="selectShippingService('pickup')">
    
                                <div class="d-flex align-items-start">
                                    <img src="/assets/svg/pickup.svg">
                                    <div class="px-3">
                                        <div class="font-weight-bold">
                                            {{'Pickup from store' | translate}}
                                        </div>
                                        <div class="text-muted">
                                            {{'Today' | translate}}
                                        </div>
                                        <div>
                                            {{'Free' | translate}}
                                        </div>
                                    </div>
                                </div>
    
                            </div>                        
                        </div>  
                    </div>
               
                    <div class="text-center" *ngIf="order.paymentStatus != 2">
                        <button class="btn btn-primary-dark-w ml-md-2 px-5 px-md-4 px-lg-5 w-100 w-md-auto d-none d-md-inline-block" (click)="placeOrder()">
                            {{'Place order' | translate}}
                        </button>
                        
                    </div>
                    <div class="text-center" *ngIf="order.paymentStatus == 2">
                        Your order was paid successfully with txid: {{order.charge_id}}
                    </div>
                </div>
            </div>
        </div>

        <div class="col col-4 px-2">
            <div class="card w-100 p-3">
                <div class="p-3 border-bottom">
                    <div class="text-muted py-3">
                        {{'Your order' | translate}}
                    </div>
                    <div *ngFor="let item of order.items" class="py-2">
                        <div class="row">
                            <div class="col col-4">
                                <img class="img-thumbnail" [src]="item.thumbnailUrl">
                            </div>
                            
                            <div class="col col-8">
                                <div class="font-weight-bold">
                                    {{item.title}}
                                </div>
                                <div class="row">
                                    <div class="col col-4">
                                        {{item.price}}
                                    </div>
                                    <div class="col col-4">
                                        x{{item.quantity}}
                                    </div>
                                    <div class="col col-4 font-weight-bold">
                                        {{item.price * item.quantity}}{{currency}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-3">
                    <div class="row py-2">
                        <div class="col col-6">
                            {{'Subtotal' | translate}}
                        </div>
                        <div class="col col-6 text-right">
                            {{subtotal}}{{currency}}
                        </div>                        
                    </div>

                    <div class="row py-2">
                        <div class="col col-6">
                            {{'Shipping' | translate}}
                        </div>
                        <div class="col col-6 text-right">
                            {{(shippingFee == '0' ? 'Free' : (shippingFee + currency)) | translate}}
                        </div>                        
                    </div>  

                    <div class="row py-2" *ngIf="discount">
                        <div class="col col-6">
                            {{'Discount' | translate}}
                        </div>
                        <div class="col col-6 text-right">
                           {{discount}}%
                        </div>                        
                    </div>  

                    <div class="row py-2">
                        <div class="col col-6 font-weight-bold">
                            {{'Total' | translate}}
                        </div>
                        <div class="col col-6 text-right font-weight-bold">
                            {{total}}{{currency}}
                        </div>                        
                    </div>
                </div>
            </div> 
        </div>

    </div>
    
   
</div>

